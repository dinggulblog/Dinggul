"use strict";(self["webpackChunkDINGGUL"]=self["webpackChunkDINGGUL"]||[]).push([[189],{5170:function(e,t,a){a.d(t,{Z:function(){return v}});var l=a(6252),s=a(2262),o=a(3577),i=a(4254);const n=["ğŸ˜€","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜†","ğŸ˜…","ğŸ˜‚","ğŸ¤£","ğŸ˜ˆ","ğŸ¤”","ğŸ˜Š","ğŸ˜‡","ğŸ™‚","ğŸ™ƒ","ğŸ˜‰","ğŸ˜Œ","ğŸ˜","ğŸ¥°","ğŸ˜˜","ğŸ˜—","ğŸ˜™","ğŸ˜š","ğŸ˜‹","ğŸ˜›","ğŸ˜","ğŸ˜œ","ğŸ¤ª","ğŸ¤¨","ğŸ§","ğŸ¤“","ğŸ˜","ğŸ‘¿","ğŸ¤©","ğŸ¥³","ğŸ˜","ğŸ˜’","ğŸ˜","ğŸ˜”","ğŸ˜Ÿ","ğŸ˜•","ğŸ™","ğŸ‘»","ğŸ˜£","ğŸ˜–","ğŸ˜«","ğŸ˜©","ğŸ¥º","ğŸ˜¢","ğŸ˜­","ğŸ˜¤","ğŸ˜ ","ğŸ˜¡","ğŸ¤¬","ğŸ¤¯","ğŸ˜³"],r={class:"emoji-container"},u={class:"emojis"},d=["onClick"],c=(0,l._)("button",{class:"md-editor-icon",tabindex:"-1"}," ğŸ™‚ ",-1);var p={__name:"EmojiExtension",props:{onInsert:{type:Function,default:()=>()=>null}},setup(e){const t=e,{DropdownToolbar:a}=i.Z,p=(0,s.qj)({visible:!1}),m=e=>{const a=()=>({targetValue:e,select:!1,deviationStart:0,deviationEnd:0});t.onInsert(a)},v=e=>{p.visible=e};return(e,t)=>((0,l.wg)(),(0,l.j4)((0,s.SU)(a),{title:"emoji",visible:p.visible,onOnChange:v},{overlay:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("ol",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(n),((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:`emoji-${t}`,onClick:t=>m(e)},(0,o.zw)(e),9,d)))),128))])])])),trigger:(0,l.w5)((()=>[c])),_:1},8,["visible"]))}};const m=p;var v=m},9432:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(6252),s=a(3577);const o={class:"toggle"};var i={__name:"Toggle",props:{isPublic:{type:Boolean}},emits:["update"],setup(e,{emit:t}){return(a,i)=>{const n=(0,l.up)("Ico");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(n,{class:"ico_toggle",svg:e.isPublic?"toggle":"toggle-fill",size:"xl",color:e.isPublic?"var(--disable)":"primary",onClick:i[0]||(i[0]=a=>t("update",!e.isPublic))},null,8,["svg","color"]),(0,l._)("span",{style:(0,s.j5)([e.isPublic?{color:"var(--text3)"}:{color:"var(--primary)"}])},(0,s.zw)(e.isPublic?"ê³µê°œ":"ë¹„ë°€"),5)])}}},n=a(3744);const r=(0,n.Z)(i,[["__scopeId","data-v-38d0afd3"]]);var u=r},5507:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});a(7658);var l=a(6252),s=a(2262),o=a(3577),i=a(9963),n=a(2201),r=a(3907),u=a(9432),d=a(4254),c=a(5170),p=a(6351),m=a(4835);const v=e=>((0,l.dD)("data-v-1db262f4"),e=e(),(0,l.Cn)(),e),g={class:"editor"},b={class:"wrap_select_toggle"},_={class:"select"},f={class:"main"},w=v((()=>(0,l._)("option",{disabled:"",hidden:"",value:""},"ë©”ë‰´ ì„ íƒ",-1))),y=["value"],h={class:"sub"},k=["disabled"],S=v((()=>(0,l._)("option",{disabled:"",hidden:"",value:""},"ê²Œì‹œíŒ ì„ íƒ",-1))),T=["value"],I={class:"category"},U=["disabled"],E=v((()=>(0,l._)("option",{disabled:"",hidden:"",value:""},"ì¹´í…Œê³ ë¦¬ ì„ íƒ",-1))),P=["value"],q={class:"wrap_toggle"},C={class:"wrap_title"},D={class:"title"},L={class:"content"},x={class:"wrap_gpt_btns"},F={class:"wrap_image_btns"},A={class:"images_add_btn"},H={for:"upload_input",class:"upload_label"},N={key:0,class:"images"},O={class:"wrap_thumbnail"},j={class:"wrap_btns"};var G={__name:"Editor",setup(e){d.Z.config({editorConfig:{languageUserDefined:{"ko-KR":m.s}}});const t=(0,n.yj)(),{push:a}=(0,n.tv)(),{state:v,dispatch:G,commit:M}=(0,r.oR)(),R=(0,l.f3)("isMobile"),Z=(0,l.f3)("DIALOG_EL"),W=(0,l.f3)("TOAST_EL"),Y=(0,s.iH)(null);let K=null,V=null,z=null,B=!0;const $=(0,l.Fl)({get:()=>v.post.post.menu?.main??"",set:e=>M("post/SET_MAIN",e)}),J=(0,l.Fl)({get:()=>v.post.post.menu?.sub??"",set:e=>M("post/SET_SUB",e)}),Q=(0,l.Fl)({get:()=>v.post.post.category??"",set:e=>M("post/SET_CATEGORY",e)}),X=(0,l.Fl)({get:()=>v.post.post.title??"",set:e=>M("post/SET_TITLE",e)}),ee=(0,l.Fl)({get:()=>v.post.post.content??"",set:e=>M("post/SET_CONTENT",e)}),te=(0,l.Fl)({get:()=>v.post.post.isPublic,set:e=>M("post/SET_IS_PUBLIC",e)}),ae=(0,l.Fl)({get:()=>v.post.post.images??[],set:e=>M("post/SET_IMAGES",e)}),le=(0,l.Fl)({get:()=>v.post.post.thumbnail??"",set:e=>M("post/SET_THUMBNAIL",e)}),se=(0,s.qj)({main:$,sub:J,title:X,content:ee,category:Q,isPublic:te,images:(0,l.Fl)((()=>ae.value.length>0?ae.value.map((e=>e._id)):[])),thumbnail:le}),oe=()=>{document.body.querySelector("div.sub select").selectedIndex=0,document.body.querySelector("div.category select").selectedIndex=0},ie=()=>{document.body.querySelector("div.category select").selectedIndex=0},ne=e=>{te.value=Boolean(e)},re=async({payload:e})=>{if(!K){const{success:e,draft:t,error:a}=await G("draft/createDraft",{payload:se});if(!e)return{success:e,images:[],error:a};K=t._id}const{success:t,images:a,error:l}=await G("draft/updateDraft",{draftId:K,payload:e||se});return t&&W.value.open("success","ì„ì‹œì €ì¥ ë˜ì—ˆìŠµë‹ˆë‹¤."),{success:t,images:a,error:l}},ue=async()=>{const{success:e,post:l,error:s}=t.query.postId?await G("post/updatePost",{payload:se}):await G("post/createPost",{payload:se});if(!e)return W.value.open("error",s);a({name:"post",params:{postId:l._id}})},de=async e=>{if(!e.target.files.length)return;const a=new FormData;Object.values(e.target.files).forEach((e=>a.append("images",e,e.name.replace(/(\s)/g,"")))),Object.entries(se).forEach((([e,t])=>a.append(e,t)));const{success:s,images:o,error:i}=t.query.postId?await G("post/updatePost",{payload:a}):await re({payload:a});if(!s)return W.value.open("error",i);if(Array.isArray(o)&&o.length){ae.value=o,pe(o[0]);for await(const e of o)(0,l.Y3)(),me(e.thumbnail)}},ce=async(e,a)=>{const{success:l,error:s}=t.query.postId?await G("post/deleteFile",{imageId:e,index:a}):await G("draft/deleteFile",{imageId:e,index:a,draftId:K});if(!l)return W.value.open("error",s)},pe=e=>{le.value=e?.thumbnail},me=e=>{const t=document.querySelector("#md-editor-v3-textarea");let a=t.value.substring(0,t.selectionStart),l=t.value.substring(t.selectionEnd,t.value.length);const s=`\n![](${e})\n`;ee.value=a+s+l,t.focus()},ve=async()=>{const e=`//localhost:3000/v1/openai/stream/completions?prompt=${X.value}`;return!z||0!==z.readyState&&1!==z.readyState?X.value.length<6?W.value.open("error","ì œëª©ì„ ìµœì†Œ 5ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”."):(z=new EventSource(e,{withCredentials:!0}),z.onmessage=e=>{const t=JSON.parse(e.data);ee.value+=t},void(z.onerror=e=>{"DONE"===e.data?W.value.open("success","ì´ˆì•ˆ ì‘ì„±ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤."):W.value.open("error","ì„œë²„ì™€ í†µì‹ ì´ ì›í• í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."),z.close()})):W.value.open("error","ì´ˆì•ˆ ìƒì„± ì¤‘ì…ë‹ˆë‹¤. ìƒì„± ì¢…ë£Œ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§„í–‰ì„ ë©ˆì¶”ê±°ë‚˜ ìƒì„±ì´ ì¢…ë£Œëœ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.")},ge=()=>{z.close()},be=e=>{B=e},_e=e=>{Y.value?.insert(e)},fe=e=>{B||(e.preventDefault(),e.returnValue="")};return(0,l.YP)((()=>B),((e,a)=>{!e||a||V||(V=t.query.postId?setInterval(ue,3e5):setInterval(re,3e5))})),(0,l.YP)(J,(()=>{$.value&&M("menu/SET_CURRENT_MENUS",{main:$.value,sub:J.value})}),{immediate:!0}),(0,l.YP)((()=>t.query),(async()=>{if(t.query.postId&&t.query.postId!==v.post.post._id){const{success:e,error:l}=await G("post/getPost",{postId:t.query.postId});if(!e)return W.value.open("error",l),a({name:"editor"})}else if(t.query.draftId){const{success:e,error:l}=await G("post/getDraft",{draftId:t.query.draftId});if(!e)return W.value.open("error",l),a({name:"editor"});K=t.query.draftId}else t.fullPath.includes("?")||M("post/UNSET_POST")}),{immediate:!0}),(0,l.bv)((()=>{window.addEventListener("beforeunload",fe),pe(ae.value[0])})),(0,l.Ah)((()=>{window.removeEventListener("beforeunload",fe),clearInterval(V)})),(0,n.iS)((async(e,t,a)=>{if(B)a();else{const e=await Z.value.show({title:"í˜„ì¬ í˜ì´ì§€ì—ì„œ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?",message:"ì„ì‹œ ì €ì¥ë˜ì§€ ì•Šì€ ë‚´ìš©ì€ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",okButton:"ë‚˜ê°€ê¸°",cancelButton:"ì ì‹œë§Œìš”!"});e?a():a(!1)}})),(e,t)=>{const a=(0,l.up)("Button"),n=(0,l.up)("Ico"),r=(0,l.up)("Image");return(0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("div",b,[(0,l._)("div",_,[(0,l._)("div",f,[(0,l.wy)((0,l._)("select",{required:"","onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.dq)($)?$.value=e:null),onChange:oe},[w,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.keys(e.$store.state.menu.menus),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,o.zw)(e),9,y)))),128))],544),[[i.bM,(0,s.SU)($)]])]),(0,l._)("div",h,[(0,l.wy)((0,l._)("select",{required:"","onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.dq)(J)?J.value=e:null),disabled:!(0,s.SU)($),onChange:ie},[S,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.$store.state.menu.menus[(0,s.SU)($)],(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.sub,value:e.sub},(0,o.zw)(e.sub),9,T)))),128))],40,k),[[i.bM,(0,s.SU)(J)]])]),(0,l._)("div",I,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.dq)(Q)?Q.value=e:null),disabled:!(0,s.SU)(J)},[E,(0,s.SU)(J)?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(e.$store.state.menu.categories,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,o.zw)(e),9,P)))),128)):(0,l.kq)("",!0)],8,U),[[i.bM,(0,s.SU)(Q)]])])]),(0,l._)("div",q,[(0,l.Wm)(u.Z,{isPublic:(0,s.SU)(te),onUpdate:ne},null,8,["isPublic"])])]),(0,l._)("div",C,[(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>(0,s.dq)(X)?X.value=e:null),placeholder:"ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.",onfocus:"this.placeholder=''",onblur:"this.placeholder='ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.'"},null,512),[[i.nr,(0,s.SU)(X)]])])]),(0,l._)("div",L,[(0,l.Wm)((0,s.SU)(d.Z),{ref_key:"CONTENT_EL",ref:Y,modelValue:(0,s.SU)(ee),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,s.dq)(ee)?ee.value=e:null),language:"ko-KR",placeholder:"ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ì ì–´ë³´ì„¸ìš”...",toolbars:(0,s.SU)(p.Z),preview:!(0,s.SU)(R),onKeydown:t[5]||(t[5]=e=>be(!1))},{defToolbars:(0,l.w5)((()=>[(0,l.Wm)(c.Z,{onInsert:_e})])),_:1},8,["modelValue","toolbars","preview"])]),(0,l._)("div",x,[(0,l.Wm)(a,{size:"sm",shape:"line-round",onClick:ve,"aria-label":"GPT CREATE START"},{default:(0,l.w5)((()=>[(0,l.Uk)("GPT ì´ˆì•ˆ ìƒì„±")])),_:1}),(0,l.Wm)(a,{size:"sm",shape:"line-round",onClick:ge,"aria-label":"GPT CREATE STOP"},{default:(0,l.w5)((()=>[(0,l.Uk)("GPT ì´ˆì•ˆ ì •ì§€")])),_:1})]),(0,l._)("div",F,[(0,l._)("div",A,[(0,l._)("label",H,[(0,l.Wm)(n,{svg:"add-image",class:"ico_add-image"}),(0,l.Uk)("ì‚¬ì§„ ì¶”ê°€")]),(0,l._)("input",{ref:"UPLOAD_INPUT_EL",type:"file",id:"upload_input",onChange:de,onClick:t[6]||(t[6]=t=>e.$refs.UPLOAD_INPUT_EL.value=""),multiple:""},null,544)])]),(0,s.SU)(ae).length?((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(ae),((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t},[(0,l._)("div",O,[(0,l.Wm)(r,{src:`${e.thumbnail}`,class:(0,o.C_)(e.thumbnail===(0,s.SU)(le)?"selected_thumbnail":""),filename:e.serverFileName,onClick:t=>(pe(e),me(e.thumbnail))},null,8,["src","class","filename","onClick"]),(0,l.Wm)(a,{class:"image_del_btn","aria-label":"DELETE IMAGE",svg:"del-image",theme:"primary",onClick:a=>ce(e._id,t)},null,8,["onClick"])])])))),128))])])):(0,l.kq)("",!0),(0,l._)("div",j,[(0,l.Wm)(a,{class:"btn_submit",shape:(0,s.SU)(R)?"fill-round-full":"fill-round",theme:"primary",onClick:t[7]||(t[7]=e=>(be(!0),ue()))},{default:(0,l.w5)((()=>[(0,l.Uk)("ì‘ì„± ì™„ë£Œ ")])),_:1},8,["shape"])])])}}},M=a(3744);const R=(0,M.Z)(G,[["__scopeId","data-v-1db262f4"]]);var Z=R},4835:function(e,t,a){a.d(t,{s:function(){return l}});const l={toolbarTips:{bold:"ì§„í•˜ê²Œ",underline:"ë°‘ì¤„",italic:"ê¸°ìš¸ì„",strikeThrough:"ì·¨ì†Œì„ ",title:"í‘œì œ",sub:"ì•„ë˜ ì²¨ì",sup:"ìœ„ ì²¨ì",quote:"ì¸ìš©ë¬¸",unorderedList:"ê¸€ë¨¸ë¦¬ ê¸°í˜¸",orderedList:"ë²ˆí˜¸ ë§¤ê¸°ê¸°",task:"í•  ì¼ ëª©ë¡",codeRow:"ì¸ë¼ì¸ ì½”ë“œ",code:"ì½”ë“œ ë¸”ë¡",link:"ë§í¬",image:"ì´ë¯¸ì§€",table:"í…Œì´ë¸”",mermaid:"Mermaid",katex:"Formular",revoke:"ë˜ëŒë¦¬ê¸°",next:"ë‹¤ì‹œ ì‹¤í–‰",save:"ì„ì‹œ ì €ì¥",prettier:"ì •ë ¬",pageFullscreen:"í˜ì´ì§€ ì „ì²´í™”ë©´",fullscreen:"ì „ì²´í™”ë©´",preview:"ë¯¸ë¦¬ë³´ê¸°",htmlPreview:"HTML ë¯¸ë¦¬ë³´ê¸°",catalog:"ì¹´íƒˆë¡œê·¸",github:" Github ì†ŒìŠ¤ ì½”ë“œ"},titleItem:{h1:"1 Heading",h2:"2 Heading",h3:"3 Heading",h4:"4 Heading",h5:"5 Heading",h6:"6 Heading"},imgTitleItem:{link:"ë§í¬ ì¶”ê°€",upload:"ì´ë¯¸ì§€ ì—…ë¡œë“œ",clip2upload:"í´ë¦½ ì—…ë¡œë“œ"},linkModalTips:{title:"ë§í¬ ì¶”ê°€",descLabel:"ì„¤ëª…:",descLabelPlaceHolder:"(ì„ íƒì‚¬í•­) ì„¤ëª…ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”...",urlLabel:"ë§í¬:",urlLabelPlaceHolder:"ë§í¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”...",buttonOK:"ì™„ë£Œ"},clipModalTips:{title:"í´ë¦½ ì´ë¯¸ì§€ ì—…ë¡œë“œ",buttonUpload:"ì—…ë¡œë“œ"},copyCode:{text:"ë³µì‚¬í•˜ê¸°",successTips:"ë³µì‚¬ ì™„ë£Œ!",failTips:"ë³µì‚¬ ì‹¤íŒ¨..."},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"ê¸€ì ìˆ˜",scrollAuto:"ìë™ ìŠ¤í¬ë¡¤"}}},6351:function(e,t,a){a.d(t,{Z:function(){return l}});const l=["bold","underline","italic","-","title","strikeThrough","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","0","=","revoke","next","save","pageFullscreen","preview","htmlPreview","catalog"]}}]);
//# sourceMappingURL=editor.8f06a554.js.map